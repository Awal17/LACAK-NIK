<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>WEB PREMIUM AWALND</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(to bottom right, #3B82F6, #6EE7B7);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 16px;
    }

    .card {
      background: white;
      padding: 24px;
      border-radius: 12px;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
    }

    h2 {
      text-align: center;
      margin-bottom: 20px;
      color: #2563eb;
    }

    input {
      width: 100%;
      padding: 12px;
      margin-bottom: 14px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
    }

    button {
      width: 100%;
      padding: 12px;
      background-color: #2563eb;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      background-color: #1d4ed8;
    }

    .error {
      color: red;
      font-size: 14px;
      margin-top: 8px;
      text-align: center;
    }

    .result {
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .info-item {
      display: flex;
      align-items: center;
      gap: 12px;
      background-color: #f9fafb;
      border-left: 5px solid #3b82f6;
      padding: 12px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.04);
    }

    .info-icon {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
      fill: #2563eb;
    }

    .info-content {
      display: flex;
      flex-direction: column;
    }

    .info-content strong {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 2px;
    }

    .info-content span {
      font-size: 15px;
      font-weight: bold;
      color: #111827;
    }

    .hidden {
      display: none;
    }

    .owner-link {
      display: block;
      text-align: center;
      margin-top: 12px;
      color: #10b981;
      text-decoration: none;
      font-weight: bold;
    }

    .owner-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <div class="card" id="loginPage">
    <h2>Login Akses</h2>
    <input type="password" id="accessCode" placeholder="Masukkan kode akses">
    <button onclick="login()">Login</button>
    <a href="https://t.me/Piaagrszz" class="owner-link">Hubungi Owner</a>
    <div class="error hidden" id="loginError">Kode salah. Coba lagi.</div>
  </div>

  <div class="card hidden" id="parserPage">
    <h2>LACAK NIK</h2>
    <input type="text" id="nikInput" maxlength="16" placeholder="Masukkan 16 digit NIK">
    <button onclick="parseNIK()">Cek NIK</button>
    <div class="error hidden" id="errorMsg"></div>
    <div class="result hidden" id="resultList"></div>
  </div>

  <script>
    const validCodes = ["123", "piaapremium", "kodecontoh"];

    function login() {
      const code = document.getElementById("accessCode").value.trim();
      const errorBox = document.getElementById("loginError");
      if (validCodes.includes(code)) {
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("parserPage").classList.remove("hidden");
      } else {
        errorBox.classList.remove("hidden");
      }
    }

    async function parseNIK() {
      const nik = document.getElementById("nikInput").value.trim();
      const errorBox = document.getElementById("errorMsg");
      const resultBox = document.getElementById("resultList");

      errorBox.classList.add("hidden");
      resultBox.classList.add("hidden");
      resultBox.innerHTML = "";

      if (!/^\d{16}$/.test(nik)) {
        errorBox.textContent = "NIK harus 16 digit angka.";
        errorBox.classList.remove("hidden");
        return;
      }

      let tanggal = parseInt(nik.slice(6, 8));
      const bulan = nik.slice(8, 10);
      const tahun = nik.slice(10, 12);
      const kodeProv = nik.slice(0, 2);
      const kodeKab = nik.slice(0, 4);
      const kodeKec = nik.slice(0, 6);
      let gender = "Laki-laki";

      if (tanggal > 40) {
        gender = "Perempuan";
        tanggal -= 40;
      }

      const fullYear = parseInt(tahun) > 25 ? "19" + tahun : "20" + tahun;
      const tglLahir = `${tanggal.toString().padStart(2, '0')}-${bulan}-${fullYear}`;

      try {
        const [prov, kab, kec] = await Promise.all([
          fetch("https://www.emsifa.com/api-wilayah-indonesia/api/provinces.json").then(r => r.json()),
          fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/regencies/${kodeProv}.json`).then(r => r.json()),
          fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/districts/${kodeKab}.json`).then(r => r.json()),
        ]);

        const provinsi = prov.find(p => p.id === kodeProv)?.name || "Tidak ditemukan";
        const kabupaten = kab.find(k => k.id === kodeKab)?.name || "Tidak ditemukan";
        const kecamatan = kec.find(k => k.id.startsWith(kodeKec))?.name || "Tidak ditemukan";

        resultBox.innerHTML = `
          <div class="info-item">
            <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C8.1 2 5 5.1 5 9c0 4.5 6 11 6 11s6-6.5 6-11c0-3.9-3.1-7-7-7zm0 9.5c-1.4 0-2.5-1.1-2.5-2.5S10.6 6.5 12 6.5 14.5 7.6 14.5 9 13.4 11.5 12 11.5z"/></svg>
            <div class="info-content">
              <strong>Provinsi</strong>
              <span>${provinsi}</span>
            </div>
          </div>
          <div class="info-item">
            <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 4h18v2H3V4zm0 6h12v2H3v-2zm0 6h18v2H3v-2z"/></svg>
            <div class="info-content">
              <strong>Kabupaten</strong>
              <span>${kabupaten}</span>
            </div>
          </div>
          <div class="info-item">
            <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4S14.21 4 12 4 8 5.79 8 8s1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            <div class="info-content">
              <strong>Kecamatan</strong>
              <span>${kecamatan}</span>
            </div>
          </div>
          <div class="info-item">
            <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12c2.7 0 5.2-1.5 6.4-4 1.2-2.5 1.2-5.5 0-8H5.6c-1.2 2.5-1.2 5.5 0 8 1.2 2.5 3.7 4 6.4 4zm0 2c-3.1 0-9 1.6-9 5v3h18v-3c0-3.4-5.9-5-9-5z"/></svg>
            <div class="info-content">
              <strong>Jenis Kelamin</strong>
              <span>${gender}</span>
            </div>
          </div>
          <div class="info-item">
            <svg class="info-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/></svg>
            <div class="info-content">
              <strong>Tanggal Lahir</strong>
              <span>${tglLahir}</span>
            </div>
          </div>
        `;
        resultBox.classList.remove("hidden");

      } catch (e) {
        errorBox.textContent = "Gagal mengambil data wilayah.";
        errorBox.classList.remove("hidden");
      }
    }
  </script>

</body>
</html>
